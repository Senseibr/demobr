---
- hosts: all
  gather_facts: True
  remote_user: centos
  become: True
  tasks:
    - debug:
        msg: "{{ansible_mounts}}"
    - debug: var=hostvars[inventory_hostname]['ansible_default_ipv4']['address']
    - debug: var=hostvars[inventory_hostname]['gateway']['address']
    - debug: 
        msg: "{{ansible_hostname}}"
    - debug: 
        msg: "{{ansible_all_ipv4_addresses}}"
    
    - name: Ensure hostname is in /etc/hosts
      lineinfile:
        state=present
        dest=/etc/hosts
        regexp="^{{ ansible_default_ipv4.address }}.+$"
        line="{{ ansible_default_ipv4.address }} {{ ansible_fqdn }} {{ ansible_hostname }}"
